<?xml version="1.0" encoding="UTF-8" ?>
<root>
    <DiscordServer>
        <SQL id="getById">
            SELECT * FROM discordserver WHERE serverid = ?
        </SQL>

        <SQL id="getByFields">
            SELECT * FROM discordserver WHERE
            ? IS NULL OR languageid = ?
            AND ? IS NULL OR serverid = ?
        </SQL>

        <SQL id="update">
            UPDATE discordserver SET
            languageid = COALESCE(?, languageid)
            WHERE serverid = ?
        </SQL>

        <SQL id="insert">
            INSERT INTO discordserver (serverid, languageid) VALUES (?, ?)
            ON CONFLICT(serverid) DO NOTHING
            RETURNING serverid
        </SQL>
    </DiscordServer>

    <DiscordServerSettings>
        <SQL id="getById">
            SELECT * FROM discordserversettings WHERE serverid = ?
        </SQL>
        <SQL id="getByFields">
            SELECT * FROM discordserversettings WHERE
             ? IS NULL OR serverid = ?
             AND ? IS NULL OR prefix = ?
             AND ? IS NULL OR volume = ?
        </SQL>
        <SQL id="update">
            UPDATE discordserversettings SET
            volume = COALESCE(?, volume),
            prefix = COALESCE(?, prefix)
            WHERE serverid = ?
        </SQL>

        <SQL id="insert">
            INSERT INTO discordserversettings (serverid, prefix, volume) VALUES (?, ?, ?)
            ON CONFLICT (serverid) DO NOTHING
            RETURNING serverid
        </SQL>
    </DiscordServerSettings>
    <PlayList>
        <SQL id="getById">
            SELECT * FROM playlist WHERE id = ?
        </SQL>

        <SQL id="getByFields">
            SELECT * FROM playlist WHERE
            ? IS NULL OR id = ?
            AND ? IS NULL OR serverid = ?
            AND ? IS NULL OR name = ?
        </SQL>

        <SQL id="update">
            UPDATE playlist SET
            name = COALESCE(?, name),
            url = COALESCE(?, url)
            WHERE id = ?
        </SQL>

        <SQL id="getByServerId">
            SELECT * FROM playlist
            WHERE serverid = ?
        </SQL>

        <SQL id="exists">
            SELECT EXISTS (
                SELECT * FROM playlist
                WHERE ? IS NULL OR id = ?
                AND ? IS NULL OR serverid = ?
                AND ? IS NULL OR name = ?
            )
        </SQL>

        <SQL id="insert">
            INSERT INTO playlist(serverid, name, url) VALUES (?, ?, ?)
            ON CONFLICT(serverid, name) DO UPDATE
            SET url = ?
            RETURNING id
        </SQL>
    </PlayList>

    <ServerAudioSettings>
        <SQL id="getById">
            SELECT * FROM serverplayersettings WHERE serverid = ?
        </SQL>

        <SQL id="update">
            UPDATE serverplayersettings SET
            meetaudiolink = ?
            WHERE serverid = ?
        </SQL>

        <SQL id="insert">
            INSERT INTO serverplayersettings (serverid, meetaudiolink)
            VALUES (?, ?)
        </SQL>
    </ServerAudioSettings>

    <EqualizerPreset>
        <SQL id="getByName">
            SELECT * FROM equalizerpreset WHERE name = ?
        </SQL>

        <SQL id="getAll">
            SELECT * FROM equalizerpreset
        </SQL>
    </EqualizerPreset>
</root>